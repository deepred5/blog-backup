---
title: 移动端常见适配方案
date: 2022-05-09 21:00:36
tags: [html, css, js]
---
做移动端页面有一段时间了，总结下工作中常用的几种移动端适配方案。

## 基础
网上已经有非常多的基础知识总结，不再赘诉，详情可以见

[《关于移动端适配，你必须要知道的》](https://juejin.cn/post/6844903845617729549)

[《不要再问我移动适配的问题了》](https://segmentfault.com/a/1190000017784801)

其中容易搞混的概念是`视口`

```html
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1,viewport-fit=cover">
```

`meta`标签中的`viewport`属性，就是`视图`的含义

视口分为

* 布局视口
* 视觉视口
* 理想视口

<!-- more -->

### 布局视口

也就是`<meta name="viewport" content="width=device-width">`中`width`属性的含义

我们在css中写的所有样式，其实就是相对于`布局视口`进行布局的

默认情况下，移动端的布局视口并不是屏幕宽度，而是一般在768px ~ 1024px间(大部分情况下980px)

可以通过`document.documentElement.clientWidth`获取 (根据`width`和`initial-scale`来确定)

### 视觉视口

视觉视口是指用户通过设备屏幕看到的区域，默认等于当前浏览器的窗口大小(当`initial-scale`为1)

当用户对浏览器进行缩放时，不会改变布局视口的大小，所以页面布局是不变的，但是**缩放会改变觉视口的大小**

可以通过`window.innerWidth`获取 (会随着缩放进行改变)

放大页面，此时`window.innerWidth`反而减小 (页面放大，你看到的东西也变少了)

### 理想视口

理想视口是指网站在移动设备中的理想大小，这个大小就是设备的屏幕大小

也就是`<meta name="viewport" content="width=device-width, initial-scale=1">`中`device-width`的含义

可以通过`screen.width`获取 (常量，不会改变)

#### initial-scale

`<meta name="viewport" content="width=device-width, initial-scale=0.5">`

根据公式`initial-scale = 理想视口宽度 / 视觉视口宽度`

假设理想视口宽度为`414px`(device-width)，此时设置`initial-scale`为0.5，那么视觉视口宽度就是`414 / 0.5 = 818`

如果这时你获取`document.documentElement.clientWidth`(布局视口)的值，会发现不是`414px`而是`818px`

结论: **布局视口宽度取的是width和视觉视口宽度的最大值**

思考题: 

`<meta name="viewport" content="width=600, initial-scale=2">`

假设理想视口宽度为`414px`(device-width)，此时`document.documentElement.clientWidth`(布局视口)的值是多少?
<details>
<summary>**答案(点击展开)**</summary>
```bash
视觉视口 = 414 / 2 = 207
布局视口 = Math.max(207, 600)
布局视口 = 600
```
</details>




## 参考
* [移动端适配有哪几种方案？](https://zhuanlan.zhihu.com/p/424961791)
* [不要再问我移动适配的问题了](https://segmentfault.com/a/1190000017784801)
* [关于移动端适配，你必须要知道的](https://juejin.cn/post/6844903845617729549)

